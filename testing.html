<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Testing &mdash; Market Simulator 0.1a documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="mktsim_jk" href="modules.html" />
    <link rel="prev" title="Usage" href="usage.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Market Simulator
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Testing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#test-routines">Test Routines</a></li>
<li class="toctree-l2"><a class="reference internal" href="#test-code">Test Code</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">mktsim_jk</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">LICENSE</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Market Simulator</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Testing</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/testing.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="testing">
<h1>Testing<a class="headerlink" href="#testing" title="Permalink to this heading"></a></h1>
<section id="test-routines">
<h2>Test Routines<a class="headerlink" href="#test-routines" title="Permalink to this heading"></a></h2>
<p>These simple tests create an order book with a single order,
start the market with a direction that will likely result in a
marketable price, and then confirm the order was executed.</p>
<p>There are 3 tests</p>
<ul class="simple">
<li><p>the first test simply starts the publisher</p></li>
<li><p>the second test creates a buy order and confirms it executs if the price is marketable</p></li>
<li><p>the third test creates a sell order and confirms it executes if the price is marketable</p></li>
</ul>
<p>To execute, run the test script in the parent directory of the mktsim_jk package</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp gp-VirtualEnv">(.venv)</span> <span class="gp">$ </span><span class="nb">cd</span> market-simulator-package
<span class="gp gp-VirtualEnv">(.venv)</span> <span class="gp">$ </span>python order_agent_limit_tests.py
<span class="go">2023-05-05 01:18:47,259 [INFO] order_agent_limit_tests.py - Testing BUY at order_execution</span>
<span class="go">2023-05-05 01:18:47,259 [DEBUG] order.py - Order created: [BUY 1,000 IBM @ 100.00] OPEN</span>
<span class="go">2023-05-05 01:18:47,259 [DEBUG] limit_order_agent.py - Added to order to order_execution agent: [BUY 1,000 IBM @ 100.00] OPEN</span>
<span class="go">2023-05-05 01:18:47,259 [DEBUG] asyncio - Using selector: KqueueSelector</span>
</pre></div>
</div>
<p><em>Successful Execution</em></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">----------------------------------------------------------------------</span>
<span class="go">Ran 3 tests in 10.009s</span>

<span class="go">OK</span>
</pre></div>
</div>
</section>
<section id="test-code">
<h2>Test Code<a class="headerlink" href="#test-code" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="OrderAgentLimitTest.test_order_book">
<span class="sig-prename descclassname"><span class="pre">OrderAgentLimitTest.</span></span><span class="sig-name descname"><span class="pre">test_order_book</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#OrderAgentLimitTest.test_order_book" title="Permalink to this definition"></a></dt>
<dd><p>Adds an order to the book and confirms that it is reflected in the book</p>
<p>The test_order_book function tests the OrderBook class.
It creates an order book object, adds a buy order to it, and then prints out the contents of the order book.
The test_order_book function also checks that there is one buy order in the book.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Test result</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="OrderAgentLimitTest.test_sell_success">
<span class="sig-prename descclassname"><span class="pre">OrderAgentLimitTest.</span></span><span class="sig-name descname"><span class="pre">test_sell_success</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#OrderAgentLimitTest.test_sell_success" title="Permalink to this definition"></a></dt>
<dd><p>Tests a sell order in a rising market.</p>
<ul class="simple">
<li><p>initialize market to be increasing</p></li>
<li><p>add a limit order above current bid</p></li>
</ul>
<p>The function creates a MarketPublisher object and sets its callback to be the on_price_tick method of
the LimitOrderAgent object. The market publisher is configured to start at 98 and move above low of 100,
and then it publishes prices for IBM stock. The test passes if there is one completed order in the order book.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Test result</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="OrderAgentLimitTest.test_buy_success">
<span class="sig-prename descclassname"><span class="pre">OrderAgentLimitTest.</span></span><span class="sig-name descname"><span class="pre">test_buy_success</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#OrderAgentLimitTest.test_buy_success" title="Permalink to this definition"></a></dt>
<dd><p>Tests a buy order in a falling market.</p>
<ul class="simple">
<li><p>initialize market to be decreasing</p></li>
<li><p>add a limit order below current ask</p></li>
</ul>
<p>The test_buy_success function tests the LimitOrderAgent’s ability to buy a stock.
The function creates a MarketPublisher object, which is used to simulate market data.
The function then creates a LimitOrderAgent object and adds an order for 1000 shares of IBM at 100 dollars per share.
Finally, the test runs the MarketPublisher and checks that there is one completed order in the book.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Test result</p>
</dd>
</dl>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="usage.html" class="btn btn-neutral float-left" title="Usage" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="modules.html" class="btn btn-neutral float-right" title="mktsim_jk" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Joshua Konstadt.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>